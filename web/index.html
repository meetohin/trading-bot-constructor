<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Bank Trading Bot Constructor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f766e 0%, #059669 50%, #047857 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 20px;
        }

        .nav-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: #6b7280;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #0f766e 0%, #047857 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(15, 118, 110, 0.4);
        }

        .nav-tab:hover:not(.active) {
            background: #f3f4f6;
            color: #374151;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-section {
            background: #f8fafc;
            padding: 25px;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
        }

        .form-section h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            width: 20px;
            height: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: #0f766e;
            box-shadow: 0 0 0 3px rgba(15, 118, 110, 0.2);
        }

        .select-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 40px;
        }

        .preset-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .preset-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .preset-card:hover {
            border-color: #0f766e;
            transform: translateY(-4px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .preset-card.selected {
            border-color: #0f766e;
            background: linear-gradient(135deg, rgba(15, 118, 110, 0.15) 0%, rgba(4, 120, 87, 0.15) 100%);
        }

        .preset-card h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #1e293b;
        }

        .preset-card p {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .preset-performance {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e5e7eb;
        }

        .performance-item {
            text-align: center;
        }

        .performance-value {
            font-weight: 600;
            color: #047857;
        }

        .performance-label {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0f766e 0%, #047857 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(15, 118, 110, 0.4);
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #e5e7eb;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .status-success {
            background: rgba(4, 120, 87, 0.15);
            color: #047857;
        }

        .status-warning {
            background: rgba(245, 158, 11, 0.1);
            color: #d97706;
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
        }

        .logs-container {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .log-entry {
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .log-timestamp {
            color: #64748b;
        }

        .log-level-info {
            color: #3b82f6;
        }

        .log-level-success {
            color: #047857;
        }

        .log-level-warning {
            color: #f59e0b;
        }

        .log-level-error {
            color: #ef4444;
        }

        .help-section {
            background: #f8fafc;
            border-left: 4px solid #0f766e;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }

        .help-section h4 {
            margin-bottom: 15px;
            color: #1e293b;
        }

        .help-section ul {
            list-style: none;
            padding-left: 0;
        }

        .help-section li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }

        .help-section li::before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #0f766e;
            font-weight: bold;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0f766e, #047857);
            width: 0%;
            transition: width 0.3s ease;
        }

        .bots-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .bot-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .bot-card.running {
            border-color: #059669;
            background: linear-gradient(135deg, rgba(5, 150, 105, 0.05) 0%, rgba(4, 120, 87, 0.05) 100%);
        }

        .bot-card.stopped {
            border-color: #ef4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(220, 38, 38, 0.05) 100%);
        }

        .bot-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .bot-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 1.1rem;
        }

        .bot-controls {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .main-content {
                padding: 20px;
            }

            .nav-tabs {
                flex-direction: column;
                gap: 10px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .preset-cards {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>T-Bank Trading Bot Constructor</h1>
            <p>–°–æ–∑–¥–∞–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–µ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ä–æ–±–æ—Ç–∞ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç</p>
        </header>

        <div class="main-content">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('presets')">
                    <span>üìä</span> –ì–æ—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
                </button>
                <button class="nav-tab" onclick="switchTab('custom')">
                    <span>‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
                <button class="nav-tab" onclick="switchTab('control')">
                    <span>üöÄ</span> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                </button>
                <button class="nav-tab" onclick="switchTab('instructions')">
                    <span>üìñ</span> –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                </button>
            </div>

            <!-- –ì–æ—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ -->
            <div id="presets" class="tab-content active">
                <h2 style="text-align: center; margin-bottom: 30px; color: #1e293b;">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é</h2>
                
                <div class="preset-cards">
                    <div class="preset-card" onclick="selectPreset('conservative')">
                        <h4>üõ°Ô∏è –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</h4>
                        <p>–ù–∏–∑–∫–æ—Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞–∫–∞–Ω–∞ –∑–∞—è–≤–æ–∫. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤.</p>
                        <div class="preset-performance">
                            <div class="performance-item">
                                <div class="performance-value">Buy: 3.0</div>
                                <div class="performance-label">–ö–æ—ç—Ñ—Ñ. –ø–æ–∫—É–ø–∫–∏</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value">0.3%</div>
                                <div class="performance-label">–ú–∏–Ω. –ø—Ä–æ—Ñ–∏—Ç</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value">–ì–ª—É–±–∏–Ω–∞: 20</div>
                                <div class="performance-label">–£—Ä–æ–≤–Ω–µ–π —Å—Ç–∞–∫–∞–Ω–∞</div>
                            </div>
                        </div>
                    </div>

                    <div class="preset-card" onclick="selectPreset('balanced')">
                        <h4>‚öñÔ∏è –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</h4>
                        <p>–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –Ω–∞ —Å—Ç–∞–∫–∞–Ω–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
                        <div class="preset-performance">
                            <div class="performance-item">
                                <div class="performance-value">Buy: 2.0</div>
                                <div class="performance-label">–ö–æ—ç—Ñ—Ñ. –ø–æ–∫—É–ø–∫–∏</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value">0.5%</div>
                                <div class="performance-label">–ú–∏–Ω. –ø—Ä–æ—Ñ–∏—Ç</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value">–ì–ª—É–±–∏–Ω–∞: 20</div>
                                <div class="performance-label">–£—Ä–æ–≤–Ω–µ–π —Å—Ç–∞–∫–∞–Ω–∞</div>
                            </div>
                        </div>
                    </div>

                    <div class="preset-card" onclick="selectPreset('aggressive')">
                        <h4>üî• –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</h4>
                        <p>–í—ã—Å–æ–∫–æ–¥–æ—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å –±—ã—Å—Ç—Ä—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏ –Ω–∞ —Å—Ç–∞–∫–∞–Ω–µ. –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤.</p>
                        <div class="preset-performance">
                            <div class="performance-item">
                                <div class="performance-value">Buy: 1.5</div>
                                <div class="performance-label">–ö–æ—ç—Ñ—Ñ. –ø–æ–∫—É–ø–∫–∏</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value">0.8%</div>
                                <div class="performance-label">–ú–∏–Ω. –ø—Ä–æ—Ñ–∏—Ç</div>
                            </div>
                            <div class="performance-item">
                                <div class="performance-value">–ì–ª—É–±–∏–Ω–∞: 30</div>
                                <div class="performance-label">–£—Ä–æ–≤–Ω–µ–π —Å—Ç–∞–∫–∞–Ω–∞</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="createBotFromPreset()">
                        <span>ü§ñ</span> –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞
                    </button>
                    <button class="btn btn-secondary" onclick="switchTab('custom')">
                        <span>‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é
                    </button>
                </div>

                <div class="help-section">
                    <h4>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö</h4>
                    <ul>
                        <li>–í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ —Å—Ç–∞–∫–∞–Ω–∞ –∑–∞—è–≤–æ–∫</li>
                        <li>–ë–æ—Ç—ã —Ç–æ—Ä–≥—É—é—Ç –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ bid/ask</li>
                        <li>–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</li>
                        <li>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å –ø–µ—Å–æ—á–Ω–∏—Ü—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                    </ul>
                </div>
            </div>

            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="custom" class="tab-content">
                <h2 style="text-align: center; margin-bottom: 30px; color: #1e293b;">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞</h2>
                
                <div class="form-grid">
                    <div class="form-section">
                        <h3>
                            <span class="icon">üîê</span>
                            –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </h3>
                        <div class="form-group">
                            <label for="bot-name">–ù–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞</label>
                            <input type="text" id="bot-name" class="form-control" placeholder="–ú–æ–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç">
                        </div>
                        <div class="form-group">
                            <label for="account-select">–¢–æ—Ä–≥–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</label>
                            <select id="account-select" class="form-control select-control">
                                <option value="">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="bot-instruments">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (FIGI —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                            <input type="text" id="bot-instruments" class="form-control" placeholder="BBG004S681W1,BBG004730N88" value="BBG004S681W1">
                        </div>
                        <div class="form-group">
                            <label for="bot-currency">–í–∞–ª—é—Ç–∞</label>
                            <select id="bot-currency" class="form-control select-control">
                                <option value="RUB">RUB - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å</option>
                                <option value="USD">USD - –î–æ–ª–ª–∞—Ä –°–®–ê</option>
                                <option value="EUR">EUR - –ï–≤—Ä–æ</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>
                            <span class="icon">üìä</span>
                            –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ —Å—Ç–∞–∫–∞–Ω–µ
                        </h3>
                        <div class="form-group">
                            <label for="required-balance">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å (‚ÇΩ)</label>
                            <input type="number" id="required-balance" class="form-control" value="10000" min="1000">
                        </div>
                        <div class="form-group">
                            <label for="orderbook-depth">–ì–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞</label>
                            <input type="number" id="orderbook-depth" class="form-control" value="20" min="5" max="50">
                        </div>
                        <div class="form-group">
                            <label for="buy-ratio">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–∫—É–ø–∫–∏</label>
                            <input type="number" id="buy-ratio" class="form-control" value="2.0" step="0.1" min="1.0">
                        </div>
                        <div class="form-group">
                            <label for="sell-ratio">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–æ–¥–∞–∂–∏</label>
                            <input type="number" id="sell-ratio" class="form-control" value="2.0" step="0.1" min="1.0">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>
                            <span class="icon">üí∞</span>
                            –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
                        </h3>
                        <div class="form-group">
                            <label for="min-profit">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å (%)</label>
                            <input type="number" id="min-profit" class="form-control" value="0.5" step="0.1" min="0.1">
                        </div>
                        <div class="form-group">
                            <label for="max-positions">–ú–∞–∫—Å–∏–º—É–º –ø–æ–∑–∏—Ü–∏–π</label>
                            <input type="number" id="max-positions" class="form-control" value="5" min="1" max="20">
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="sell-out" checked style="margin-right: 8px;">
                                –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
                            </label>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="createCustomBot()">
                        <span>ü§ñ</span> –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞
                    </button>
                    <button class="btn btn-secondary" onclick="saveConfiguration()">
                        <span>üíæ</span> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                    <button class="btn btn-secondary" onclick="loadConfiguration()">
                        <span>üìÇ</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                </div>
            </div>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º -->
            <div id="control" class="tab-content">
                <h2 style="text-align: center; margin-bottom: 30px; color: #1e293b;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏</h2>
                
                <div class="form-section">
                    <h3>
                        <span class="icon">üìä</span>
                        –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div>
                            <p><strong>–°—Ç–∞—Ç—É—Å API:</strong> <span id="api-status">–ü—Ä–æ–≤–µ—Ä–∫–∞...</span></p>
                            <p><strong>–ê–∫–∫–∞—É–Ω—Ç–æ–≤:</strong> <span id="accounts-count">0</span></p>
                        </div>
                        <div>
                            <p><strong>–ê–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤:</strong> <span id="active-bots">0</span></p>
                            <p><strong>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</strong> <span id="uptime">00:00:00</span></p>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>
                        <span class="icon">ü§ñ</span>
                        –ú–æ–∏ –±–æ—Ç—ã
                    </h3>
                    <div id="bots-list" class="bots-list">
                        <div style="text-align: center; color: #6b7280; padding: 40px;">
                            –ë–æ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –±–æ—Ç–∞ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ì–æ—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏" –∏–ª–∏ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
                        </div>
                    </div>
                </div>

                <div class="logs-container" id="logs-container" style="display: none;">
                    <div id="logs-content">
                        <div class="log-entry">
                            <span class="log-timestamp">[2024-01-15 14:30:25]</span>
                            <span class="log-level-info">[INFO]</span>
                            –°–µ—Ä–≤–µ—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö –±–æ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="toggleLogs()">
                        <span>üìú</span> –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ª–æ–≥–∏
                    </button>
                    <button class="btn btn-secondary" onclick="refreshBots()">
                        <span>üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
                    </button>
                </div>

                <div class="help-section">
                    <h4>üí° –°–æ–≤–µ—Ç—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é</h4>
                    <ul>
                        <li>–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º</li>
                        <li>–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞</li>
                        <li>–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ –ª–∏–º–∏—Ç—ã –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏</li>
                        <li>–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ —Å—É–º–º–∞–º–∏ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                    </ul>
                </div>
            </div>

            <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
            <div id="instructions" class="tab-content">
                <h2 style="text-align: center; margin-bottom: 30px; color: #1e293b;">–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
                
                <div class="form-section">
                    <h3>üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h3>
                    <ol style="padding-left: 20px; line-height: 1.8;">
                        <li><strong>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</strong> –≤ T-Bank –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</li>
                        <li><strong>–ü–æ–ª—É—á–∏—Ç–µ API —Ç–æ–∫–µ–Ω</strong> –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞</li>
                        <li><strong>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ config.yaml</strong> —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</li>
                        <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é</strong> –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ—é</li>
                        <li><strong>–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞</strong> –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–µ</li>
                        <li><strong>–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</strong> –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω</li>
                    </ol>
                </div>

                <div class="form-section">
                    <h3>üîê –ü–æ–ª—É—á–µ–Ω–∏–µ API —Ç–æ–∫–µ–Ω–∞</h3>
                    <ol style="padding-left: 20px; line-height: 1.8;">
                        <li>–ó–∞–π–¥–∏—Ç–µ –≤ <a href="https://www.tbank.ru/invest/" target="_blank">T-Bank –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</a></li>
                        <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"</li>
                        <li>–ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"</li>
                        <li>–û—Ç–∫–ª—é—á–∏—Ç–µ "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –∫–æ–¥–æ–º"</li>
                        <li>–í—ã–ø—É—Å—Ç–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω</li>
                        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!
                        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω (–æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑!)</li>
                        <li>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–∞–π–ª config.yaml –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</li>
                    </ol>
                </div>

                <div class="form-section">
                    <h3>üìä –°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–∞ —Å—Ç–∞–∫–∞–Ω–µ –∑–∞—è–≤–æ–∫</h3>
                    <div style="margin-bottom: 20px;">
                        <h4>–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã</h4>
                        <p>–ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–±—ä–µ–º–æ–≤ –∑–∞—è–≤–æ–∫ –Ω–∞ –ø–æ–∫—É–ø–∫—É (bid) –∏ –ø—Ä–æ–¥–∞–∂—É (ask) –≤ —Å—Ç–∞–∫–∞–Ω–µ:</p>
                        <ul style="padding-left: 20px; line-height: 1.6;">
                            <li><strong>–ü–æ–∫—É–ø–∫–∞:</strong> –ö–æ–≥–¥–∞ –æ–±—ä–µ–º bid –∑–∞—è–≤–æ–∫ –±–æ–ª—å—à–µ ask –∑–∞—è–≤–æ–∫ –≤ buy_ratio —Ä–∞–∑</li>
                            <li><strong>–ü—Ä–æ–¥–∞–∂–∞:</strong> –ö–æ–≥–¥–∞ –æ–±—ä–µ–º ask –∑–∞—è–≤–æ–∫ –±–æ–ª—å—à–µ bid –∑–∞—è–≤–æ–∫ –≤ sell_ratio —Ä–∞–∑</li>
                            <li><strong>–ü—Ä–æ–≤–µ—Ä–∫–∏:</strong> –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å</li>
                        </ul>
                        <div style="background: #e0f2fe; padding: 15px; border-radius: 8px; margin-top: 15px;">
                            <p><strong>–§–æ—Ä–º—É–ª–∞:</strong></p>
                            <p>‚Ä¢ ratio = sum(bid_volumes) / sum(ask_volumes)</p>
                            <p>‚Ä¢ –ü–æ–∫—É–ø–∞–µ–º –µ—Å–ª–∏: ratio > buy_ratio</p>
                            <p>‚Ä¢ –ü—Ä–æ–¥–∞–µ–º –µ—Å–ª–∏: 1/ratio > sell_ratio</p>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
                    <div style="display: grid; gap: 15px;">
                        <div>
                            <h4>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–∫—É–ø–∫–∏ (buy_ratio)</h4>
                            <p>–í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–±—ä–µ–º bid –∑–∞—è–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å ask –¥–ª—è –ø–æ–∫—É–ø–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 1.5-3.0</p>
                        </div>
                        <div>
                            <h4>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–æ–¥–∞–∂–∏ (sell_ratio)</h4>
                            <p>–í–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–±—ä–µ–º ask –∑–∞—è–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å bid –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 1.5-3.0</p>
                        </div>
                        <div>
                            <h4>–ì–ª—É–±–∏–Ω–∞ —Å—Ç–∞–∫–∞–Ω–∞</h4>
                            <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π —Å—Ç–∞–∫–∞–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ–±—ä–µ–º–æ–≤. –û–±—ã—á–Ω–æ 10-50 —É—Ä–æ–≤–Ω–µ–π.</p>
                        </div>
                        <div>
                            <h4>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å (%)</h4>
                            <p>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –ø–æ–∑–∏—Ü–∏–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: 0.3-1.0%</p>
                        </div>
                        <div>
                            <h4>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å</h4>
                            <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Å—É–º–º–∞ –Ω–∞ —Å—á–µ—Ç–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤ —Ä—É–±–ª—è—Ö.</p>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</h3>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <h4>–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö:</h4>
                        <ul style="padding-left: 20px; line-height: 1.6;">
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é</li>
                            <li>–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–µ–±–æ–ª—å—à–∏—Ö —Å—É–º–º –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–µ</li>
                            <li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—ã—Å–æ–∫–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (2.5-3.0)</li>
                            <li>–¢–æ—Ä–≥—É–π—Ç–µ –ª–∏–∫–≤–∏–¥–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (TCSG, SBER)</li>
                        </ul>
                    </div>
                    <div style="background: #d1f2eb; padding: 15px; border-radius: 8px; border-left: 4px solid #0f766e; margin-top: 15px;">
                        <h4>–î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤:</h4>
                        <ul style="padding-left: 20px; line-height: 1.6;">
                            <li>–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –Ω–∏–∑–∫–∏–º–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞–º–∏ (1.2-1.8)</li>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö</li>
                            <li>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</li>
                            <li>–ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≥–ª—É–±–∏–Ω—ã —Å—Ç–∞–∫–∞–Ω–∞ (10, 20, 50)</li>
                            <li>–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞</li>
                        </ul>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üìà –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–æ—Ç–∞</h3>
                    <ul style="padding-left: 20px; line-height: 1.8;">
                        <li><strong>–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫:</strong> –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li>
                        <li><strong>–ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫:</strong> –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li>
                        <li><strong>–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å:</strong> –ê–±—Å–æ–ª—é—Ç–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –≤ –≤–∞–ª—é—Ç–µ —Ç–æ—Ä–≥–æ–≤–ª–∏</li>
                        <li><strong>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</strong> –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞</li>
                        <li><strong>–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏:</strong> –¢–µ–∫—É—â–∏–µ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏</li>
                    </ul>
                </div>

                <div class="form-section">
                    <h3>‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</h3>
                    <div style="background: #f8d7da; padding: 15px; border-radius: 8px; border-left: 4px solid #dc3545;">
                        <ul style="padding-left: 20px; line-height: 1.6; margin: 0;">
                            <li>–¢–æ—Ä–≥–æ–≤—ã–µ —Ä–æ–±–æ—Ç—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –ø—Ä–∏–±—ã–ª—å</li>
                            <li>–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ</li>
                            <li>–ù–µ –≤–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –±–æ–ª—å—à–µ, —á–µ–º –º–æ–∂–µ—Ç–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ –ø–æ—Ç–µ—Ä—è—Ç—å</li>
                            <li>–†–µ–≥—É–ª—è—Ä–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞</li>
                            <li>–†—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –º–æ–≥—É—Ç –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è</li>
                        </ul>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
                    <p>–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:</p>
                    <ul style="padding-left: 20px; line-height: 1.8;">
                        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫</li>
                        <li>–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ config.yaml</li>
                        <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞</li>
                        <li>–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ <a href="https://github.com/Tinkoff/invest-api-go-sdk" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API</a></li>
                        <li>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ <a href="https://t.me/joinchat/VaW05CDzcSdsPULM" target="_blank">Telegram-—á–∞—Ç—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
    <div id="progressModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏...</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="modalMessage">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</p>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal()" id="modalCloseBtn" style="display: none;">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>



    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let selectedPreset = null;
        let currentConfig = {};
        let bots = {};
        let accounts = [];
        let startTime = Date.now();

        // API –±–∞–∑–æ–≤—ã–π URL
        const API_BASE = '/api/v1';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            loadAccounts();
            loadBots();
            checkApiStatus();
            updateUptime();

            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏
            setInterval(checkApiStatus, 30000);
            setInterval(updateUptime, 1000);
            setInterval(loadBots, 10000);

            // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
            const savedConfig = localStorage.getItem('tradingBotConfig');
            if (savedConfig) {
                currentConfig = JSON.parse(savedConfig);
                showNotification('–ó–∞–≥—Ä—É–∂–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è', 'success');
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // –í—ã–±–æ—Ä –ø—Ä–µ—Å–µ—Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
        function selectPreset(preset) {
            document.querySelectorAll('.preset-card').forEach(card => {
                card.classList.remove('selected');
            });

            event.target.closest('.preset-card').classList.add('selected');
            selectedPreset = preset;
            loadPresetConfig(preset);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–µ—Å–µ—Ç–∞
        function loadPresetConfig(preset) {
            const presets = {
                conservative: {
                    'required-balance': 10000,
                    'orderbook-depth': 20,
                    'buy-ratio': 3.0,
                    'sell-ratio': 3.0,
                    'min-profit': 0.3,
                    'max-positions': 3,
                    'sell-out': true
                },
                balanced: {
                    'required-balance': 20000,
                    'orderbook-depth': 20,
                    'buy-ratio': 2.0,
                    'sell-ratio': 2.0,
                    'min-profit': 0.5,
                    'max-positions': 5,
                    'sell-out': true
                },
                aggressive: {
                    'required-balance': 50000,
                    'orderbook-depth': 30,
                    'buy-ratio': 1.5,
                    'sell-ratio': 1.5,
                    'min-profit': 0.8,
                    'max-positions': 8,
                    'sell-out': true
                }
            };

            const config = presets[preset];
            if (config) {
                Object.keys(config).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        if (element.type === 'checkbox') {
                            element.checked = config[key];
                        } else {
                            element.value = config[key];
                        }
                    }
                });
                currentConfig = config;
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –∏–∑ –ø—Ä–µ—Å–µ—Ç–∞
        async function createBotFromPreset() {
            if (!selectedPreset) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é', 'warning');
                return;
            }

            if (accounts.length === 0) {
                showNotification('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç—ã', 'warning');
                return;
            }

            showModal('–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞', '–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏...');

            const presetNames = {
                conservative: '–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –±–æ—Ç',
                balanced: '–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ—Ç',
                aggressive: '–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –±–æ—Ç'
            };

            const botConfig = {
                name: presetNames[selectedPreset],
                type: 'orderbook',
                account_id: accounts[0],
                instruments: ['BBG004S681W1'], // TCSG –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                currency: 'RUB',
                orderbook_config: {
                    required_money_balance: currentConfig['required-balance'],
                    depth: currentConfig['orderbook-depth'],
                    buy_ratio: currentConfig['buy-ratio'],
                    sell_ratio: currentConfig['sell-ratio'],
                    min_profit: currentConfig['min-profit'],
                    sell_out: currentConfig['sell-out'],
                    max_positions: currentConfig['max-positions']
                }
            };

            try {
                const response = await fetch(`${API_BASE}/bots`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-API-Key': 'demo-api-key'
                    },
                    body: JSON.stringify(botConfig)
                });

                const result = await response.json();

                if (response.ok) {
                    closeModal();
                    showNotification(`–ë–æ—Ç "${botConfig.name}" —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!`, 'success');
                    loadBots();
                    switchTab('control');
                } else {
                    closeModal();
                    showNotification(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                closeModal();
                showNotification(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞: ${error.message}`, 'error');
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞
        async function createCustomBot() {
            const botName = document.getElementById('bot-name').value;
            const accountId = document.getElementById('account-select').value;
            const instruments = document.getElementById('bot-instruments').value.split(',').map(s => s.trim());
            const currency = document.getElementById('bot-currency').value;

            if (!botName || !accountId || !instruments[0]) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'warning');
                return;
            }

            showModal('–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞', '–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞...');

            const botConfig = {
                name: botName,
                type: 'orderbook',
                account_id: accountId,
                instruments: instruments,
                currency: currency,
                orderbook_config: {
                    required_money_balance: parseFloat(document.getElementById('required-balance').value),
                    depth: parseInt(document.getElementById('orderbook-depth').value),
                    buy_ratio: parseFloat(document.getElementById('buy-ratio').value),
                    sell_ratio: parseFloat(document.getElementById('sell-ratio').value),
                    min_profit: parseFloat(document.getElementById('min-profit').value),
                    sell_out: document.getElementById('sell-out').checked,
                    max_positions: parseInt(document.getElementById('max-positions').value)
                }
            };

            try {
                const response = await fetch(`${API_BASE}/bots`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-API-Key': 'demo-api-key'
                    },
                    body: JSON.stringify(botConfig)
                });

                const result = await response.json();

                if (response.ok) {
                    closeModal();
                    showNotification(`–ë–æ—Ç "${botConfig.name}" —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!`, 'success');
                    loadBots();
                    switchTab('control');
                } else {
                    closeModal();
                    showNotification(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                closeModal();
                showNotification(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞: ${error.message}`, 'error');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
        async function loadAccounts() {
            try {
                const response = await fetch(`${API_BASE}/accounts`, {
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });
                const data = await response.json();

                accounts = data.accounts || [];
                updateAccountSelect();
                document.getElementById('accounts-count').textContent = accounts.length;

                logMessage(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤: ${accounts.length}`, 'info');
            } catch (error) {
                logMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤: ' + error.message, 'error');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
        function updateAccountSelect() {
            const select = document.getElementById('account-select');
            select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç</option>';

            accounts.forEach(accountId => {
                const option = document.createElement('option');
                option.value = accountId;
                option.textContent = accountId;
                select.appendChild(option);
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –±–æ—Ç–æ–≤
        async function loadBots() {
            try {
                const response = await fetch(`${API_BASE}/bots`, {
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });
                const data = await response.json();

                bots = data.bots || {};
                updateBotsDisplay();
                updateActiveBots();
            } catch (error) {
                logMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–æ–≤: ' + error.message, 'error');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–æ—Ç–æ–≤
        function updateBotsDisplay() {
            const container = document.getElementById('bots-list');

            if (Object.keys(bots).length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; color: #6b7280; padding: 40px;">
                        –ë–æ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–≥–æ –±–æ—Ç–∞ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ì–æ—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏" –∏–ª–∏ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
                    </div>
                `;
                return;
            }

            container.innerHTML = Object.entries(bots).map(([id, bot]) => {
                const statusClass = bot.is_active ? 'running' : 'stopped';
                const statusText = bot.is_active ? '–†–∞–±–æ—Ç–∞–µ—Ç' : '–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
                const statusIcon = bot.is_active ? '‚úÖ' : '‚è∏Ô∏è';

                return `
                    <div class="bot-card ${statusClass}">
                        <div class="bot-header">
                            <div class="bot-name">${bot.name || bot.id}</div>
                            <div class="status-indicator status-${bot.is_active ? 'success' : 'warning'}">
                                <span>${statusIcon}</span> ${statusText}
                            </div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <p><strong>–¢–∏–ø:</strong> –ë–æ—Ç –Ω–∞ —Å—Ç–∞–∫–∞–Ω–µ</p>
                            <p><strong>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:</strong> ${bot.instruments.join(', ')}</p>
                            <p><strong>–ê–∫–∫–∞—É–Ω—Ç:</strong> ${bot.account_id}</p>
                        </div>
                        <div class="bot-controls">
                            ${bot.is_active ?
                    `<button class="btn btn-danger btn-small" onclick="stopBot('${id}')">–°—Ç–æ–ø</button>
                                 <button class="btn btn-secondary btn-small" onclick="pauseBot('${id}')">–ü–∞—É–∑–∞</button>` :
                    `<button class="btn btn-success btn-small" onclick="startBot('${id}')">–°—Ç–∞—Ä—Ç</button>`
                }
                            <button class="btn btn-secondary btn-small" onclick="showBotStats('${id}')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                            <button class="btn btn-danger btn-small" onclick="deleteBot('${id}')">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏
        async function startBot(botId) {
            try {
                const response = await fetch(`${API_BASE}/bots/${botId}/start`, {
                    method: 'POST',
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });

                const result = await response.json();

                if (response.ok) {
                    showNotification(`–ë–æ—Ç ${botId} –∑–∞–ø—É—â–µ–Ω`, 'success');
                    logMessage(`–ë–æ—Ç ${botId} –∑–∞–ø—É—â–µ–Ω`, 'success');
                    loadBots();
                } else {
                    showNotification(`–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                showNotification(`–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞: ${error.message}`, 'error');
            }
        }

        async function stopBot(botId) {
            try {
                const response = await fetch(`${API_BASE}/bots/${botId}/stop`, {
                    method: 'POST',
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });

                const result = await response.json();

                if (response.ok) {
                    showNotification(`–ë–æ—Ç ${botId} –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`, 'success');
                    logMessage(`–ë–æ—Ç ${botId} –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`, 'success');
                    loadBots();
                } else {
                    showNotification(`–û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                showNotification(`–û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞: ${error.message}`, 'error');
            }
        }

        async function pauseBot(botId) {
            try {
                const response = await fetch(`${API_BASE}/bots/${botId}/pause`, {
                    method: 'POST',
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });

                const result = await response.json();

                if (response.ok) {
                    showNotification(`–ë–æ—Ç ${botId} –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`, 'success');
                    loadBots();
                } else {
                    showNotification(`–û—à–∏–±–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                showNotification(`–û—à–∏–±–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–æ—Ç–∞: ${error.message}`, 'error');
            }
        }

        async function deleteBot(botId) {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –±–æ—Ç–∞?')) {
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/bots/${botId}`, {
                    method: 'DELETE',
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });

                const result = await response.json();

                if (response.ok) {
                    showNotification(`–ë–æ—Ç ${botId} —É–¥–∞–ª–µ–Ω`, 'success');
                    logMessage(`–ë–æ—Ç ${botId} —É–¥–∞–ª–µ–Ω`, 'info');
                    loadBots();
                } else {
                    showNotification(`–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –±–æ—Ç–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                showNotification(`–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –±–æ—Ç–∞: ${error.message}`, 'error');
            }
        }

        async function showBotStats(botId) {
            try {
                const response = await fetch(`${API_BASE}/bots/${botId}/stats`, {
                    headers: {
                        'X-API-Key': 'demo-api-key'
                    }
                });

                const stats = await response.json();

                if (response.ok) {
                    const message = `
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞ ${botId}:
‚Ä¢ –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: ${stats.total_trades}
‚Ä¢ –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö: ${stats.winning_trades}
‚Ä¢ –£–±—ã—Ç–æ—á–Ω—ã—Ö: ${stats.losing_trades}
‚Ä¢ –û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: ${stats.total_profit.toFixed(2)} ‚ÇΩ
‚Ä¢ –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏: ${stats.total_profit_pct.toFixed(1)}%
‚Ä¢ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ${formatDuration(stats.running_time)}
‚Ä¢ –û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π: ${Object.keys(stats.current_positions).length}
                    `;
                    alert(message);
                } else {
                    showNotification(`–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: ${stats.error}`, 'error');
                }
            } catch (error) {
                showNotification(`–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: ${error.message}`, 'error');
            }
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatDuration(nanoseconds) {
            const seconds = Math.floor(nanoseconds / 1000000000);
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        async function checkApiStatus() {
            try {
                const response = await fetch(`${API_BASE}/status`);
                const data = await response.json();

                document.getElementById('api-status').textContent = data.status === 'running' ? '–†–∞–±–æ—Ç–∞–µ—Ç' : '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
            } catch (error) {
                document.getElementById('api-status').textContent = '–û—à–∏–±–∫–∞';
                logMessage('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API: ' + error.message, 'error');
            }
        }

        function updateUptime() {
            const uptime = Date.now() - startTime;
            const hours = Math.floor(uptime / 3600000);
            const minutes = Math.floor((uptime % 3600000) / 60000);
            const seconds = Math.floor((uptime % 60000) / 1000);

            document.getElementById('uptime').textContent =
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateActiveBots() {
            const activeCount = Object.values(bots).filter(bot => bot.is_active).length;
            document.getElementById('active-bots').textContent = activeCount;
        }

        function refreshBots() {
            loadBots();
            showNotification('–°–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω', 'success');
        }

        function toggleLogs() {
            const logsContainer = document.getElementById('logs-container');
            logsContainer.style.display = logsContainer.style.display === 'none' ? 'block' : 'none';
        }

        function logMessage(message, level = 'info') {
            const logsContent = document.getElementById('logs-content');
            const timestamp = new Date().toLocaleString('ru-RU');

            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `
                <span class="log-timestamp">[${timestamp}]</span>
                <span class="log-level-${level}">[${level.toUpperCase()}]</span>
                ${message}
            `;

            logsContent.appendChild(logEntry);
            logsContent.scrollTop = logsContent.scrollHeight;

            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–æ–≤
            const logs = logsContent.children;
            if (logs.length > 100) {
                logsContent.removeChild(logs[0]);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function saveConfiguration() {
            const config = {
                botName: document.getElementById('bot-name').value,
                accountId: document.getElementById('account-select').value,
                instruments: document.getElementById('bot-instruments').value,
                currency: document.getElementById('bot-currency').value,
                requiredBalance: document.getElementById('required-balance').value,
                orderbookDepth: document.getElementById('orderbook-depth').value,
                buyRatio: document.getElementById('buy-ratio').value,
                sellRatio: document.getElementById('sell-ratio').value,
                minProfit: document.getElementById('min-profit').value,
                maxPositions: document.getElementById('max-positions').value,
                sellOut: document.getElementById('sell-out').checked
            };

            localStorage.setItem('tradingBotConfig', JSON.stringify(config));
            showNotification('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!', 'success');
        }

        function loadConfiguration() {
            const savedConfig = localStorage.getItem('tradingBotConfig');
            if (savedConfig) {
                const config = JSON.parse(savedConfig);

                Object.keys(config).forEach(key => {
                    const elementId = key.replace(/([A-Z])/g, '-$1').toLowerCase();
                    const element = document.getElementById(elementId);
                    if (element) {
                        if (element.type === 'checkbox') {
                            element.checked = config[key];
                        } else {
                            element.value = config[key];
                        }
                    }
                });

                showNotification('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!', 'success');
            } else {
                showNotification('–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'warning');
            }
        }

        // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        function showModal(title, message) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('modalCloseBtn').style.display = 'none';
            document.getElementById('progressModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('progressModal').classList.remove('show');
        }

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.animation = 'slideIn 0.3s ease';

            switch (type) {
                case 'success':
                    notification.style.background = '#047857';
                    break;
                case 'warning':
                    notification.style.background = '#f59e0b';
                    break;
                case 'error':
                    notification.style.background = '#ef4444';
                    break;
                default:
                    notification.style.background = '#3b82f6';
            }

            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        window.onclick = function(event) {
            const modal = document.getElementById('progressModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à–∏ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>